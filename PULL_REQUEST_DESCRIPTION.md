# تبدیل ارسال پیامک از خودکار به دستی

## 📋 خلاصه تغییرات
این Pull Request سیستم ارسال پیامک را از حالت خودکار به دستی تبدیل می‌کند و یک رابط کاربری کامل برای مدیریت ارسال پیامک‌ها ارائه می‌دهد.

## 🎯 هدف
- کنترل بیشتر کاربر بر روی زمان و محتوای ارسال پیامک
- امکان ویرایش و شخصی‌سازی متن پیامک‌ها
- بهبود تجربه کاربری با ارائه قالب‌های آماده

## 🔄 تغییرات انجام شده

### 1. **حذف ارسال خودکار پیامک**
- **فایل:** `new_request.php`
- **تغییر:** حذف کد ارسال خودکار پیامک پس از ثبت درخواست
- **افزودن:** دکمه‌های عملیات برای چاپ رسید، ارسال پیامک و مشاهده جزئیات

### 2. **ایجاد صفحه ارسال پیامک دستی** 
- **فایل جدید:** `send_sms.php`
- **ویژگی‌ها:**
  - نمایش اطلاعات کامل درخواست
  - قالب‌های پیش‌فرض پیامک (4 نوع مختلف)
  - ویرایشگر متن با شمارنده کاراکتر
  - بررسی وضعیت سرویس SMS
  - پشتیبانی از دو طرح ظاهری (روشن/تیره)
  - واجد شرایط responsive design

### 3. **بهبود صفحه جستجو**
- **فایل:** `search_requests.php`
- **افزودن:** لینک ارسال پیامک در نتایج جستجو

## 📱 ویژگی‌های کلیدی صفحه ارسال پیامک

### 🎨 **رابط کاربری**
- طراحی مدرن و کاربرپسند
- سازگار با دو طرح روشن و تیره
- انیمیشن‌های تعاملی برای قالب‌ها
- طراحی responsive برای موبایل

### 📝 **قالب‌های پیش‌فرض**
1. **اطلاع ثبت درخواست** - برای اطلاع‌رسانی ثبت اولیه
2. **به‌روزرسانی وضعیت** - برای اطلاع تغییر وضعیت
3. **یادآوری** - برای یادآوری به مشتری
4. **اطلاع تکمیل** - برای اطلاع تکمیل کار

### ⚙️ **ویژگی‌های فنی**
- شمارنده کاراکتر زنده (حداکثر 160 کاراکتر)
- اعتبارسنجی وضعیت سرویس SMS
- نمایش خطاها و پیام‌های موفقیت
- پشتیبانی از الگوهای از پیش تعریف شده SMS.ir

### 🔍 **نمایش اطلاعات درخواست**
- کد رهگیری
- عنوان درخواست  
- اطلاعات مشتری (نام و شماره تلفن)
- وضعیت فعلی درخواست

## 🔗 **نحوه دسترسی**
کاربران می‌توانند از طریق روش‌های زیر به صفحه ارسال پیامک دسترسی پیدا کنند:

1. **پس از ثبت درخواست جدید** - دکمه "ارسال پیامک"
2. **از صفحه جستجوی درخواست‌ها** - آیکون SMS در ستون عملیات
3. **از صفحه مشاهده درخواست** - لینک مستقیم (قابل اضافه شدن)

## 📊 **تست و کیفیت**

### ✅ **موارد تست شده:**
- عملکرد صحیح در دو طرح روشن و تیره
- واکنش‌پذیری در اندازه‌های مختلف صفحه
- شمارنده کاراکتر و اعتبارسنجی ورودی
- عملکرد قالب‌های پیش‌فرض
- مدیریت خطاها و وضعیت سرویس

### 🔒 **امنیت:**
- بررسی مجوز کاربر (checkLogin)
- اعتبارسنجی شناسه درخواست
- فیلتر کردن ورودی‌ها (htmlspecialchars)
- محدودیت طول پیامک

## 📈 **مزایای این تغییر**

### 👤 **برای کاربران:**
- کنترل کامل بر روی زمان ارسال پیامک
- امکان شخصی‌سازی متن پیامک‌ها
- استفاده از قالب‌های آماده برای سرعت بیشتر
- جلوگیری از ارسال پیامک‌های غیرضروری

### 💻 **برای سیستم:**
- کاهش ترافیک غیرضروری SMS
- کنترل بهتر هزینه‌های پیامک
- امکان بررسی و تأیید قبل از ارسال
- قابلیت اضافه کردن ویژگی‌های بیشتر در آینده

## 🎨 **تصاویر**

### حالت روشن (Light Theme):
- کارت‌های سفید با سایه‌های ملایم
- رنگ‌بندی آبی و سبز برای دکمه‌ها
- قالب‌های خاکستری روشن

### حالت تیره (Dark Theme):
- بک‌گراند گرادیانت آبی
- کارت‌های شفاف تیره
- رنگ‌های سازگار با طرح تیره

## 🚀 **آماده برای استفاده**
این تغییرات کاملاً سازگار با کد موجود هستند و نیازی به تغییر در دیتابیس یا سایر بخش‌های سیستم نیست.

---

## 📝 **یادداشت‌های توسعه‌دهنده**

### فایل‌های تغییر یافته:
- ✅ `new_request.php` - حذف ارسال خودکار، افزودن دکمه‌های عملیات
- ✅ `send_sms.php` - صفحه جدید ارسال پیامک دستی
- ✅ `search_requests.php` - افزودن لینک ارسال پیامک

### وابستگی‌ها:
- `sms_config.php` - برای تنظیمات SMS (موجود)
- `functions.php` - برای توابع مربوط به SMS (موجود)
- Chart.js، TailwindCSS، FontAwesome (موجود)

**نوع تغییر:** ✨ Feature / Enhancement  
**سطح ریسک:** 🟢 کم (بدون تغییر در ساختار اصلی)  
**نیاز به تست:** ✅ تست شده و آماده  
**مستندات:** ✅ کامل